import{i as $,B as O,r as t,k as Q,W as c,o as s,c as d,w as e,u as a,a as l,E as R,a1 as W,b as v,f as i,K as Y,ad as z,J as D,v as p,Q as L,e as _,x,g as E,t as F,O as I,P as G}from"./index-4698ed6d.js";const H={key:0,alt:"User photo",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},X=["src"],Z={class:"container",style:{"margin-top":"10%"}},ee=p("br",null,null,-1),le=p("br",null,null,-1),ae=p("p",null,"Your changes have been updated successfully!",-1),oe=p("p",null,"There was an error updating your changes. Please try again.",-1),te={__name:"UserDetails",props:{phone:{type:String,required:!0}},setup(T){const B=$("axios"),j=$("serverBaseUrl");O();const b=T,h=t(""),V=t(""),U=t(!1),f=t(b.phone),C=t(!0),o=t({}),g=t("");Q(()=>{B.get("vcard/".concat(b.phone)).then(m=>{o.value=m.data.data,console.log(o.value),C.value=!1,o.value.photo_url==null?g.value=null:g.value="".concat(j,"/storage/fotos/").concat(o.value.photo_url),h.value=o.value.name,V.value=o.value.email,U.value=!1}).catch(m=>{console.log(m)})}),t(""),t("");const r=t(!1),k=t(!1),y=t(!1),q=async()=>{if(r.value)try{await B.put("vcard/".concat(b.phone),{name:o.value.name,email:o.value.email}),k.value=!0,h.value=o.value.name,V.value=o.value.email,U.value=!1}catch(m){console.error("Error saving changes:",m),y.value=!0,o.value.name=h.value,o.value.email=V.value}else U.value=r.value;r.value=!r.value},N=()=>{k.value=!1,y.value=!1};return(m,n)=>{const A=c("ion-title"),J=c("ion-toolbar"),K=c("ion-header"),w=c("ion-card-title"),S=c("ion-card-content"),M=c("ion-card"),P=c("ion-modal");return s(),d(a(G),null,{default:e(()=>[l(K,null,{default:e(()=>[l(J,null,{default:e(()=>[l(a(R),{slot:"start"},{default:e(()=>[l(a(W))]),_:1}),l(A,null,{default:e(()=>[v("User details")]),_:1})]),_:1})]),_:1}),l(a(I),{fullscreen:!0,class:"ion-padding"},{default:e(()=>[C.value?(s(),d(a(i),{key:0},{default:e(()=>[l(a(Y))]),_:1})):(s(),d(a(z),{key:1},{default:e(()=>[g.value==null?(s(),D("img",H)):(s(),D("img",{key:1,alt:"User photo",src:g.value},null,8,X))]),_:1})),p("div",Z,[r.value?(s(),d(a(L),{key:1,class:"list-container"},{default:e(()=>[l(a(i),null,{default:e(()=>[l(a(_),{label:"Phone number",modelValue:f.value,"onUpdate:modelValue":n[3]||(n[3]=u=>f.value=u),"label-placement":"stacked",readonly:!0},null,8,["modelValue"])]),_:1}),l(a(i),null,{default:e(()=>[l(a(_),{label:"Name",modelValue:o.value.name,"onUpdate:modelValue":n[4]||(n[4]=u=>o.value.name=u),"label-placement":"stacked",readonly:!1},null,8,["modelValue"])]),_:1}),l(a(i),null,{default:e(()=>[l(a(_),{label:"Email",modelValue:o.value.email,"onUpdate:modelValue":n[5]||(n[5]=u=>o.value.email=u),"label-placement":"stacked",readonly:!1},null,8,["modelValue"])]),_:1})]),_:1})):(s(),d(a(L),{key:0,class:"list-container"},{default:e(()=>[r.value?x("",!0):(s(),d(a(i),{key:0},{default:e(()=>[l(a(_),{label:"Phone number",modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=u=>f.value=u),"label-placement":"stacked",readonly:!0},null,8,["modelValue"])]),_:1})),l(a(i),null,{default:e(()=>[l(a(_),{label:"Name",modelValue:o.value.name,"onUpdate:modelValue":n[1]||(n[1]=u=>o.value.name=u),"label-placement":"stacked",readonly:!0},null,8,["modelValue"])]),_:1}),l(a(i),null,{default:e(()=>[l(a(_),{label:"Email",modelValue:o.value.email,"onUpdate:modelValue":n[2]||(n[2]=u=>o.value.email=u),"label-placement":"stacked",readonly:!0},null,8,["modelValue"])]),_:1})]),_:1})),ee,le,l(a(E),{expand:"block",color:r.value?"secondary":"primary",onClick:q},{default:e(()=>[v(F(r.value?"Save":"Edit"),1)]),_:1},8,["color"])]),k.value?(s(),d(P,{key:2,"is-open":k.value},{default:e(()=>[l(a(I),{class:"ion-text-center"},{default:e(()=>[l(M,null,{default:e(()=>[l(S,null,{default:e(()=>[l(w,null,{default:e(()=>[v("Success")]),_:1}),ae]),_:1})]),_:1}),l(a(E),{expand:"full",color:"success",onClick:N},{default:e(()=>[v("Close")]),_:1})]),_:1})]),_:1},8,["is-open"])):x("",!0),y.value?(s(),d(P,{key:3,"is-open":y.value},{default:e(()=>[l(a(I),{class:"ion-text-center"},{default:e(()=>[l(M,null,{default:e(()=>[l(S,null,{default:e(()=>[l(w,null,{default:e(()=>[v("Error")]),_:1}),oe]),_:1})]),_:1}),l(a(E),{expand:"full",color:"danger",onClick:N},{default:e(()=>[v("Close")]),_:1})]),_:1})]),_:1},8,["is-open"])):x("",!0)]),_:1})]),_:1})}}};export{te as default};
