System.register(["./index-legacy-4ec23ca4.js","./simple-mask-money.esm-legacy-fbde4038.js"],(function(e,a){"use strict";var l,t,n,u,o,i,d,s,c,r,v,f,p,m,_,y,h,g,x,b,w,j,k,C,S,V,z,I,D,F,N,P,q,A,E,M,B,U,Y,$,G,H,K,L,O;return{setters:[e=>{l=e._,t=e.A,n=e.B,u=e.i,o=e.r,i=e.j,d=e.a8,s=e.k,c=e.a9,r=e.o,v=e.c,f=e.w,p=e.u,m=e.a,_=e.D,y=e.E,h=e.a1,g=e.G,x=e.b,b=e.H,w=e.h,j=e.O,k=e.q,C=e.s,S=e.ac,V=e.al,z=e.v,I=e.t,D=e.g,F=e.x,N=e.L,P=e.M,q=e.N,A=e.ae,E=e.R,M=e.X,B=e.I,U=e.e,Y=e.K,$=e.P,G=e.y,H=e.z},e=>{K=e.r,L=e.i,O=e.l}],execute:function(){var a=document.createElement("style");a.textContent=".ion-label-w-spinner[data-v-805848a1]{display:flex;align-items:center;gap:5px}.d-flex[data-v-805848a1]{display:flex}.flex-column[data-v-805848a1]{flex-direction:column}.justify-content-space-between[data-v-805848a1]{justify-content:space-between}.justify-content-center[data-v-805848a1]{justify-content:center}.align-items-center[data-v-805848a1]{align-items:center}.h-100[data-v-805848a1]{height:100%}.w-100[data-v-805848a1]{width:100%}\n",document.head.appendChild(a);const R=e=>(G("data-v-805848a1"),e=e(),H(),e),T={class:"d-flex flex-column justify-content-space-between h-100"},X=R((()=>z("b",null,"Send to:",-1))),J=R((()=>z("label",{for:"inputValue"},"Amount",-1))),Q=["disabled"];e("default",l({__name:"SendMoney",props:{pairPhone:{type:String,required:!0}},setup(e){const a=t(),l=n(),G=u("axios"),H=e,R=o({vcard:a.params.phoneNumber,value:0,pair_vcard:H.pairPhone,confirmation_code:"",autoSave:!1}),W=o(null),Z=o({value:[],confirmation_code:[]}),ee=o(!1),ae=o(!1),le=o(null),te=o(!1),ne=i((()=>{var e;return null!==(e=a.query.name)&&void 0!==e?e:H.pairPhone})),ue=()=>{Z.value.value=[],Z.value.confirmation_code=[];const e=O(le.value);let a=!0;(!e||e<=0)&&(a=!1,Z.value.value.push("The amount must be greater than 0")),e>de.value&&(a=!1,Z.value.value.push("You don't have enough balance to send this amount")),R.value.confirmation_code||(a=!1,Z.value.confirmation_code.push("You must enter a your confirmation code")),ee.value=a},oe=()=>{ae.value=!0,G.post("/transactions",R.value).then((e=>{ae.value=!1,te.value=!0})).catch((e=>{ae.value=!1,Z.value=e.response.data.errors}))};d(le,(e=>{e&&(R.value.value=e?O(e):0)}));const ie=new Intl.NumberFormat("pt",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),de=i((()=>W.value?(W.value.balance-W.value.piggy_bank_balance).toFixed(2):0)),se=i((()=>`${ie.format(de.value)} €`)),ce=()=>{te.value=!1,l.go(-1)};return s((()=>{K("#inputValue",{suffix:"€",fixed:!0,fractionDigits:2,decimalSeparator:",",thousandsSeparator:"."}),G.get(`/vcard/${a.params.phoneNumber}`).then((e=>{W.value=e.data.data}))})),c((()=>{L("#inputValue")})),(e,a)=>(r(),v(p($),null,{default:f((()=>[m(p(b),null,{default:f((()=>[m(p(_),null,{default:f((()=>[m(p(y),{slot:"start"},{default:f((()=>[m(p(h))])),_:1}),m(p(g),null,{default:f((()=>[x("Send Money")])),_:1})])),_:1})])),_:1}),m(p(j),{class:"ion-padding"},{default:f((()=>[te.value?(r(),v(p(w),{key:0,"is-open":te.value},{default:f((()=>[m(p(j),{class:"ion-text-center"},{default:f((()=>[m(p(k),null,{default:f((()=>[m(p(C),null,{default:f((()=>[m(p(S),{icon:p(V),style:{"font-size":"64px",color:"green"}},null,8,["icon"]),z("p",null,I(le.value)+" sent to "+I(ne.value),1)])),_:1})])),_:1}),m(p(D),{expand:"full",color:"success",onClick:ce},{default:f((()=>[x("Continue")])),_:1})])),_:1})])),_:1},8,["is-open"])):F("",!0),z("div",T,[m(p(N),null,{default:f((()=>[m(p(P),{class:"ion-justify-content-center"},{default:f((()=>[z("h3",null,[z("b",null,"Available Balance: "+I(se.value),1)])])),_:1}),m(p(P),null,{default:f((()=>[m(p(q),{size:"12"},{default:f((()=>[m(p(A),null,{default:f((()=>[X,x(" "+I(ne.value),1)])),_:1})])),_:1})])),_:1}),m(p(P),null,{default:f((()=>[m(p(q),{size:"12",style:{display:"flex","flex-direction":"column","justify-content":"center"}},{default:f((()=>[J,E(z("input",{id:"inputValue",type:"text",style:{"text-align":"center","font-size":"30px",width:"100%"},onInput:ue,placeholder:"0,00€","onUpdate:modelValue":a[0]||(a[0]=e=>le.value=e),disabled:ae.value},null,40,Q),[[M,le.value]]),Z.value&&Z.value.value?(r(),v(p(A),{key:0,color:"danger"},{default:f((()=>[x(I(Z.value.value[0]),1)])),_:1})):F("",!0)])),_:1}),m(p(q),{size:"12"},{default:f((()=>[m(p(B),{position:"floating"},{default:f((()=>[x("Confirmation Code")])),_:1}),m(p(U),{type:"password",placeholder:"Enter your Confirmation Code",maxlength:3,onIonInput:ue,modelValue:R.value.confirmation_code,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value.confirmation_code=e),disabled:ae.value},null,8,["modelValue","disabled"]),Z.value&&Z.value.confirmation_code?(r(),v(p(A),{key:0,color:"danger"},{default:f((()=>[x(I(Z.value.confirmation_code[0]),1)])),_:1})):F("",!0)])),_:1})])),_:1})])),_:1}),m(p(P),{class:"ion-justify-content-center w-100",style:{"align-self":"center"}},{default:f((()=>[m(p(k),{class:"w-100"},{default:f((()=>[m(p(C),{style:{display:"flex","flex-direction":"column","align-items":"center"}},{default:f((()=>[m(p(D),{disabled:!ee.value||ae.value,onClick:oe},{default:f((()=>[m(p(B),{class:"ion-label-w-spinner"},{default:f((()=>[x("Send "),ae.value?(r(),v(p(Y),{key:0})):F("",!0)])),_:1})])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1}))}},[["__scopeId","data-v-805848a1"]]))}}}));
