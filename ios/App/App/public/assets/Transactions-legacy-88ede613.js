System.register(["./index-legacy-4ec23ca4.js"],(function(e,l){"use strict";var a,t,u,n,o,d,i,s,r,c,v,p,f,m,b,y,_,g,D,k,h,x,w,C,B,T,V,S,I,z,U,A,F,O,j,E,K,R,L,P,W,$,q,G;return{setters:[e=>{a=e._,t=e.r,u=e.j,n=e.W,o=e.o,d=e.J,i=e.a,s=e.w,r=e.u,c=e.D,v=e.E,p=e.g,f=e.b,m=e.G,b=e.H,y=e.R,_=e.v,g=e.X,D=e.c,k=e.Y,h=e.x,x=e.T,w=e.f,C=e.Z,B=e.$,T=e.O,V=e.V,S=e.a0,I=e.y,z=e.z,U=e.i,A=e.k,F=e.a1,O=e.K,j=e.a2,E=e.t,K=e.a3,R=e.a4,L=e.a5,P=e.a6,W=e.U,$=e.P,q=e.I,G=e.a7}],execute:function(){var l=document.createElement("style");l.textContent=".dateInput[data-v-53f8b3dd]{width:100%;padding:5px;margin-bottom:10px}.custom-button-sorts[data-v-53f8b3dd]{height:30px}.ion-title[data-v-53f8b3dd]{padding-bottom:10px}.container[data-v-73a1de48]{display:flex}.filters[data-v-73a1de48]{flex:1;justify-content:flex-start;padding-right:20px}.sorts[data-v-73a1de48]{justify-content:flex-end}.custom-button-filters[data-v-73a1de48],.custom-button-sorts[data-v-73a1de48]{--background: rgb(54, 91, 148)}ion-badge[data-v-73a1de48]{position:absolute;font-size:10pt;right:-16px;top:-13px;color:#eb445a}.ion-badgeB[data-v-73a1de48]{position:absolute;font-size:10pt;right:8px;top:-13px}ion-button.custom-class[data-v-73a1de48]::part(native){overflow:visible}\n",document.head.appendChild(l);const H=e=>(I("data-v-53f8b3dd"),e=e(),z(),e),J=H((()=>_("br",null,null,-1))),N=H((()=>_("br",null,null,-1))),X=H((()=>_("label",{class:"label"},"Start Date:",-1))),Y=["disabled"],Z=H((()=>_("br",null,null,-1))),M=H((()=>_("label",{class:"label"},"End Date:",-1))),Q=["disabled"],ee=H((()=>_("br",null,null,-1))),le=a({__name:"TransactionsFilter",props:["filterByDate","filterByType"],setup(e){var l,a;const I=e;t();const z=t(!1),U=t(!1),A=t((null===(l=I.filterByDate)||void 0===l?void 0:l.startDate)||new Date(1990,1,1).toISOString()),F=t((null===(a=I.filterByDate)||void 0===a?void 0:a.endDate)||(new Date).toISOString()),O=t(I.filterByType||"All"),j=u((()=>new Date(A.value).toLocaleString("pt",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}))),E=u((()=>new Date(F.value).toLocaleString("pt",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}))),K=()=>S.dismiss(null,"cancel"),R=()=>S.dismiss({filterByDate:{startDate:A.value,endDate:F.value},filterByType:{selectedType:O.value}},"confirm"),L=()=>{U.value=!1,z.value=!0},P=()=>z.value=!1,W=()=>{z.value=!1,U.value=!0},$=()=>U.value=!1;return(e,l)=>{const a=n("ion-list");return o(),d(V,null,[i(r(b),null,{default:s((()=>[i(r(c),null,{default:s((()=>[i(r(v),{slot:"start"},{default:s((()=>[i(r(p),{color:"medium",onClick:K},{default:s((()=>[f("Reset")])),_:1})])),_:1}),i(r(m),null,{default:s((()=>[f("Filters")])),_:1}),i(r(v),{slot:"end"},{default:s((()=>[i(r(p),{onClick:R,strong:!0},{default:s((()=>[f("Confirm")])),_:1})])),_:1})])),_:1})])),_:1}),i(r(T),{class:"ion-padding"},{default:s((()=>[J,N,y(_("div",null,[X,y(_("input",{class:"dateInput","onUpdate:modelValue":l[0]||(l[0]=e=>j.value=e),onClick:L,disabled:z.value},null,8,Y),[[g,j.value]]),z.value?(o(),D(r(k),{key:0,modelValue:A.value,"onUpdate:modelValue":l[1]||(l[1]=e=>A.value=e),locale:"pt-pt"},null,8,["modelValue"])):h("",!0),z.value?(o(),D(r(p),{key:1,onClick:P},{default:s((()=>[f("OK")])),_:1})):h("",!0)],512),[[x,!U.value]]),Z,y(_("div",null,[M,y(_("input",{class:"dateInput","onUpdate:modelValue":l[2]||(l[2]=e=>E.value=e),onClick:W,disabled:U.value},null,8,Q),[[g,E.value]]),U.value?(o(),D(r(k),{key:0,modelValue:F.value,"onUpdate:modelValue":l[3]||(l[3]=e=>F.value=e),locale:"pt-pt"},null,8,["modelValue"])):h("",!0),U.value?(o(),D(r(p),{key:1,onClick:$},{default:s((()=>[f("OK")])),_:1})):h("",!0)],512),[[x,!z.value]]),i(a,null,{default:s((()=>[ee,i(r(w),null,{default:s((()=>[i(r(C),{"aria-label":"Type",interface:"popover",placeholder:"Select transaction type",modelValue:O.value,"onUpdate:modelValue":l[4]||(l[4]=e=>O.value=e)},{default:s((()=>[i(r(B),{value:"All"},{default:s((()=>[f("All")])),_:1}),i(r(B),{value:"Debit"},{default:s((()=>[f("Debit")])),_:1}),i(r(B),{value:"Credit"},{default:s((()=>[f("Credit")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-53f8b3dd"]]),ae=e=>(I("data-v-73a1de48"),e=e(),z(),e),te={key:0},ue={key:1},ne={class:"container"},oe={class:"filters"},de={class:"sorts"},ie=ae((()=>_("p",null,"Reference:",-1))),se={key:1},re=[ae((()=>_("p",null,"No transactions",-1)))];e("default",a({__name:"Transactions",props:{phone:{type:String,required:!0}},setup(e){const l=e,a=U("axios"),m=t(!0),y=t([]),g=t("value"),k=()=>g.value="date",x=()=>g.value="value",C=t("asc"),B=t(null),I=t("All"),z=()=>{"asc"==C.value?C.value="desc":C.value="asc"},H=u((()=>{let e=y.value;return B.value&&B.value.startDate&&B.value.endDate&&(e=e.filter((e=>{const l=new Date(e.datetime),a=new Date(B.value.startDate),t=new Date(B.value.endDate);return l>=a&&l<=t}))),I.value&&"All"!==I.value&&(e=e.filter((e=>e.type===I.value))),"date"===g.value?e.sort(((e,l)=>{const a=new Date(e.datetime),t=new Date(l.datetime);return"asc"===C.value?a-t:t-a})):"value"===g.value&&e.sort(((e,l)=>{const a=parseFloat(e.value.replace("€","")),t=parseFloat(l.value.replace("€",""));return"asc"===C.value?t-a:a-t})),e})),J=async()=>{const e=await S.create({component:le,componentProps:{filterByDate:B.value,filterByType:I.value}});e.present();const{data:l,role:a}=await e.onWillDismiss();console.log(l),B.value=null==l?void 0:l.filterByDate,I.value=null==l?void 0:l.filterByType.selectedType,console.log(I.value)};return A((()=>{a.get(`vcards/${l.phone}/transactions`).then((e=>{y.value=e.data.data,console.log(y.value),m.value=!1})).catch((e=>{console.log(e)}))})),(e,l)=>{const a=n("ion-title"),t=n("ion-icon"),u=n("ion-col"),y=n("ion-row"),S=n("ion-grid"),I=n("ion-list");return o(),D(r($),null,{default:s((()=>[i(r(b),null,{default:s((()=>[i(r(c),null,{default:s((()=>[i(r(v),{slot:"start"},{default:s((()=>[i(r(F))])),_:1}),i(a,null,{default:s((()=>[f("Transactions")])),_:1})])),_:1})])),_:1}),i(r(T),{class:"ion-padding"},{default:s((()=>[m.value?(o(),d("div",te,[i(r(O))])):(o(),d("div",ue,[_("div",null,[_("div",ne,[_("div",oe,[i(r(p),{class:"custom-button-filters",onClick:J,expand:"block",fill:"solid"},{default:s((()=>[f(" Filters "),i(r(j),{color:"danger"},{default:s((()=>[f(E(null!=B.value&&B.value.startDate?"*":""),1)])),_:1})])),_:1})]),_("div",de,[i(r(p),{class:"custom-button-sorts date-button",disabled:"date"==g.value,size:"",onClick:k},{default:s((()=>[i(t,{icon:r(K)},null,8,["icon"])])),_:1},8,["disabled"]),i(r(p),{class:"custom-button-sorts euro-button",disabled:"value"==g.value,onClick:x},{default:s((()=>[i(t,{icon:r(R)},null,8,["icon"])])),_:1},8,["disabled"]),i(r(p),{class:"custom-button-sorts arrow-button",onClick:z},{default:s((()=>["asc"==C.value?(o(),D(t,{key:0,icon:r(L)},null,8,["icon"])):h("",!0),"desc"==C.value?(o(),D(t,{key:1,icon:r(P)},null,8,["icon"])):h("",!0)])),_:1})])]),H.value.length>0?(o(),D(I,{key:0},{default:s((()=>[(o(!0),d(V,null,W(H.value,(e=>(o(),D(r(w),null,{default:s((()=>[i(r(q),null,{default:s((()=>[i(S,null,{default:s((()=>[i(y,null,{default:s((()=>[i(u,{size:"12"},{default:s((()=>[ie,_("h1",null,E(e.payment_reference),1)])),_:2},1024),i(u,{size:"8",style:{"margin-top":"5px"}},{default:s((()=>[_("p",null,E(e.datetime),1)])),_:2},1024),i(u,{size:"4",class:"ion-text-end"},{default:s((()=>[_("h1",{style:G([{padding:"0",margin:"0"},{color:e.value.includes("-")?"red":"green"}]),color:"success"},E(e.value),5)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})):(o(),d("div",se,re))])]))])),_:1})])),_:1})}}},[["__scopeId","data-v-73a1de48"]]))}}}));
