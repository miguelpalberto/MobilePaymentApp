import{d as q,r as h,o as y,c as k,w as t,a,u as e,I as E,b as u,e as O,f as R,g as x,h as H,_ as P,i as S,j as g,k as T,l as D,m as B,n as C,t as $,p as F,q as z,s as Z,v as o,x as j,y as V,z as U,A as G,B as W,C as J,S as N,D as K,E as Q,F as X,G as Y,H as ee,J as L,K as ae,L as te,M,N as b,O as ne,P as le}from"./index-4698ed6d.js";import"./AddContactModal.vue_vue_type_style_index_0_scoped_ca61ceab_lang-119f6f67.js";const oe=q({__name:"ModalPin",props:{isOpen:{type:Boolean,default:!1}},emits:["checkPin"],setup(l,{emit:d}){const _=l,n=d,c=h(""),r=()=>{n("checkPin",c.value)};return(p,s)=>(y(),k(e(H),{"is-open":_.isOpen,"can-dismiss":!_.isOpen},{default:t(()=>[a(e(R),null,{default:t(()=>[a(e(E),{position:"floating"},{default:t(()=>[u("Pin")]),_:1}),a(e(O),{type:"password",modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=i=>c.value=i)},null,8,["modelValue"])]),_:1}),a(e(x),{color:"medium",class:"enter",expand:"block",onClick:r},{default:t(()=>[u("Enter")]),_:1})]),_:1},8,["is-open","can-dismiss"]))}});const se=P(oe,[["__scopeId","data-v-57c43089"]]),re={__name:"Balance",props:{phone:{type:String,required:!0}},setup(l){const d=S("axios"),_=l,n=h(""),c=g(()=>{if(n.value==0)return"No funds";const i=new Intl.NumberFormat("pt",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(n.value);return"".concat(i," €")}),r=()=>{d.get("/vcard/".concat(_.phone)).then(s=>{console.log(s.data.data.balance),n.value=s.data.data.balance})};let p=null;return T(()=>{p=setInterval(()=>{r()},3e3),r()}),D(()=>{clearInterval(p)}),(s,i)=>(y(),k(e(z),null,{default:t(()=>[a(e(B),null,{default:t(()=>[a(e(C),{style:{"font-size":"18px"}},{default:t(()=>[u($(c.value),1)]),_:1}),a(e(F),null,{default:t(()=>[u("Balance")]),_:1})]),_:1})]),_:1}))}};const ce=l=>(V("data-v-771df41f"),l=l(),U(),l),ue={class:"transaction-info"},ie={class:"transaction-title"},de={class:"transaction-amount"},_e=ce(()=>o("br",null,null,-1)),pe={__name:"LastTransaction",props:{phone:{type:String,required:!0}},setup(l){const d=l,_=S("axios"),n=h(""),c=h(""),r=h(0),p=g(()=>r.value>0),s=g(()=>"/transactions/".concat(d.phone)),i=()=>{_.get("vcards/".concat(d.phone,"/transactions/latest")).then(f=>{var w,m,v,I;console.log(f),n.value=(m=(w=f.data.latestTransaction)==null?void 0:w.value)!=null?m:"No transactions yet",c.value=(I=(v=f.data.latestTransaction)==null?void 0:v.payment_reference)!=null?I:"",r.value=f.data.total}).catch(f=>{console.log(f)})};return T(()=>{i()}),(f,w)=>(y(),k(e(z),null,{default:t(()=>[a(e(B),null,{default:t(()=>[a(e(C),{style:{"font-size":"18px"}},{default:t(()=>[u("Last Transaction")]),_:1})]),_:1}),a(e(Z),null,{default:t(()=>[o("div",ue,[o("div",ie,[o("p",null,$(c.value),1)]),o("div",de,[o("p",null,$(n.value),1)])]),_e,p.value?(y(),k(e(x),{key:0,"router-link":s.value,style:{width:"100%"}},{default:t(()=>[u("Show More")]),_:1},8,["router-link"])):j("",!0)]),_:1})]),_:1}))}},fe=P(pe,[["__scopeId","data-v-771df41f"]]),me={__name:"PiggyBankBalance",props:{phone:{type:String,required:!0}},setup(l){const d=l,_=S("axios"),n=h(""),c=g(()=>{if(n==null||n.value==0)return"No balance";const i=new Intl.NumberFormat("pt",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(n.value);return"".concat(i," €")}),r=()=>{_.get("/vcard/".concat(d.phone)).then(s=>{n.value=s.data.data.piggy_bank_balance})};let p=null;return T(()=>{p=setInterval(()=>{r()},3e3),r()}),D(()=>{clearInterval(p)}),(s,i)=>(y(),k(e(z),null,{default:t(()=>[a(e(B),null,{default:t(()=>[a(e(C),{style:{"font-size":"18px"}},{default:t(()=>[u($(c.value),1)]),_:1}),a(e(F),null,{default:t(()=>[u("Piggy Bank")]),_:1})]),_:1})]),_:1}))}};const A=l=>(V("data-v-b4d9559e"),l=l(),U(),l),ve={class:""},he={key:0},ge={key:1},ye=A(()=>o("div",{class:"ion-card-img-container"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"75",height:"75",fill:"currentColor",class:"bi bi-send",viewBox:"0 0 16 16"},[o("path",{d:"M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"})])],-1)),Ie=A(()=>o("div",{class:"ion-card-img-container"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"currentColor",class:"bi bi-piggy-bank",viewBox:"0 0 16 16"},[o("path",{d:"M5 6.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm1.138-1.496A6.613 6.613 0 0 1 7.964 4.5c.666 0 1.303.097 1.893.273a.5.5 0 0 0 .286-.958A7.602 7.602 0 0 0 7.964 3.5c-.734 0-1.441.103-2.102.292a.5.5 0 1 0 .276.962z"}),o("path",{"fill-rule":"evenodd",d:"M7.964 1.527c-2.977 0-5.571 1.704-6.32 4.125h-.55A1 1 0 0 0 .11 6.824l.254 1.46a1.5 1.5 0 0 0 1.478 1.243h.263c.3.513.688.978 1.145 1.382l-.729 2.477a.5.5 0 0 0 .48.641h2a.5.5 0 0 0 .471-.332l.482-1.351c.635.173 1.31.267 2.011.267.707 0 1.388-.095 2.028-.272l.543 1.372a.5.5 0 0 0 .465.316h2a.5.5 0 0 0 .478-.645l-.761-2.506C13.81 9.895 14.5 8.559 14.5 7.069c0-.145-.007-.29-.02-.431.261-.11.508-.266.705-.444.315.306.815.306.815-.417 0 .223-.5.223-.461-.026a.95.95 0 0 0 .09-.255.7.7 0 0 0-.202-.645.58.58 0 0 0-.707-.098.735.735 0 0 0-.375.562c-.024.243.082.48.32.654a2.112 2.112 0 0 1-.259.153c-.534-2.664-3.284-4.595-6.442-4.595zM2.516 6.26c.455-2.066 2.667-3.733 5.448-3.733 3.146 0 5.536 2.114 5.536 4.542 0 1.254-.624 2.41-1.67 3.248a.5.5 0 0 0-.165.535l.66 2.175h-.985l-.59-1.487a.5.5 0 0 0-.629-.288c-.661.23-1.39.359-2.157.359a6.558 6.558 0 0 1-2.157-.359.5.5 0 0 0-.635.304l-.525 1.471h-.979l.633-2.15a.5.5 0 0 0-.17-.534 4.649 4.649 0 0 1-1.284-1.541.5.5 0 0 0-.446-.275h-.56a.5.5 0 0 1-.492-.414l-.254-1.46h.933a.5.5 0 0 0 .488-.393zm12.621-.857a.565.565 0 0 1-.098.21.704.704 0 0 1-.044-.025c-.146-.09-.157-.175-.152-.223a.236.236 0 0 1 .117-.173c.049-.027.08-.021.113.012a.202.202 0 0 1 .064.199z"})])],-1)),be={__name:"Dashboard",setup(l){const d=S("axios"),_=G(),n=h(_.params.phoneNumber),c=h(!1),r=h(!1),p=W();g(()=>"/transactions/".concat(n.value));const s=g(()=>"/mydetails/".concat(n.value)),i=g(()=>"/piggyBank/".concat(n.value)),f=g(()=>"/mycontacts");J(async()=>{const m=new N;await m.create();const v=await m.get("token");if(!v)p.push("/login");else{d.defaults.headers.common.Authorization="Bearer "+v;const I=await m.get("phone_number");console.log("phone number",I),I&&(n.value=I),c.value=!1}});const w=async m=>{const v=new N;await v.create(),await v.get("pin")==m&&(r.value=!0,console.log("pin correct"))};return(m,v)=>(y(),k(e(le),null,{default:t(()=>[a(e(ee),null,{default:t(()=>[a(e(K),null,{default:t(()=>[a(e(Q),{slot:"start"},{default:t(()=>[a(e(X))]),_:1}),a(e(Y),null,{default:t(()=>[u("Dashboard")]),_:1})]),_:1})]),_:1}),a(e(ne),null,{default:t(()=>[o("div",ve,[c.value||!r.value?(y(),L("div",he,[a(e(ae))])):(y(),L("div",ge,[a(e(te),null,{default:t(()=>[a(e(M),null,{default:t(()=>[a(e(b),{size:"12"},{default:t(()=>[o("div",null,[u(" Welcome, "+$(n.value),1),o("div",null,[a(e(x),{"router-link":s.value},{default:t(()=>[u("User")]),_:1},8,["router-link"])])])]),_:1})]),_:1}),a(e(M),null,{default:t(()=>[a(e(b),{size:"6"},{default:t(()=>[a(re,{phone:n.value},null,8,["phone"])]),_:1}),a(e(b),{size:"6"},{default:t(()=>[a(me,{phone:n.value},null,8,["phone"])]),_:1})]),_:1}),a(e(M),null,{default:t(()=>[a(e(b),{size:"6"},{default:t(()=>[a(e(x),{"router-link":f.value,style:{width:"100%"},fill:"clear"},{default:t(()=>[a(e(z),null,{default:t(()=>[ye,a(e(B),null,{default:t(()=>[a(e(C),null,{default:t(()=>[u("Send Money")]),_:1})]),_:1})]),_:1})]),_:1},8,["router-link"])]),_:1}),a(e(b),{size:"6"},{default:t(()=>[a(e(x),{"router-link":i.value,fill:"clear",style:{width:"100%"}},{default:t(()=>[a(e(z),null,{default:t(()=>[Ie,a(e(B),null,{default:t(()=>[a(e(C),null,{default:t(()=>[u("Piggy Bank")]),_:1})]),_:1})]),_:1})]),_:1},8,["router-link"])]),_:1})]),_:1}),a(e(M),null,{default:t(()=>[a(e(b),{size:"12"},{default:t(()=>[a(fe,{phone:n.value},null,8,["phone"])]),_:1})]),_:1})]),_:1})]))]),a(se,{"is-open":!r.value,onCheckPin:w},null,8,["is-open"])]),_:1})]),_:1}))}},xe=P(be,[["__scopeId","data-v-b4d9559e"]]);export{xe as default};
