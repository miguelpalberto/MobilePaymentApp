import{_ as b,i as y,B as k,S as x,C as L,r as p,o as f,c as T,w as o,u as e,a,D as B,G as C,b as r,H as P,v as m,Q as N,f as v,I as _,e as g,R as S,T as U,J as w,U as D,V as E,g as H,O as R,P as j,t as A}from"./index-4698ed6d.js";const F={class:"container"},G={class:"error"},J={__name:"Login",setup(O){const I=y("axios"),h=k(),d=new x;L(async()=>{await d.create(),await d.get("token")&&h.push("/dashboard")});const s=p(""),c=p(""),u=p(""),n=p([]),V=()=>{n.value=[];let i=!0;(s.value==""||s.value.length!=9||s.value.charAt(0)!=9)&&(n.value.push("The phone field is empty or does not have 9 digits or does not start with 9"),i=!1),c.value==""&&(n.value.push("The password field is empty"),i=!1),(u.value==""||u.value.length!=3)&&(n.value.push("The pin field is empty or does not have 3 digits"),i=!1),i&&I.post("/auth/login",{username:s.value,password:c.value,confirmation_code:u.value}).then(async t=>{if(console.log(t.data),t.data.access_token)try{await d.set("token",t.data.access_token),await d.set("phone_number",s.value),await d.set("pin",u.value),h.push("/dashboard")}catch(l){console.log(l)}},t=>{console.log(t),(t.response.status==401||t.response.status==400)&&n.value.push("Invalid credentials")})};return(i,t)=>(f(),T(e(j),null,{default:o(()=>[a(e(P),null,{default:o(()=>[a(e(B),null,{default:o(()=>[a(e(C),null,{default:o(()=>[r("Login")]),_:1})]),_:1})]),_:1}),a(e(R),{fullscreen:!0,class:"ion-padding"},{default:o(()=>[m("div",F,[a(e(N),{class:"list-container"},{default:o(()=>[a(e(v),null,{default:o(()=>[a(e(_),{position:"floating"},{default:o(()=>[r("Phone")]),_:1}),a(e(g),{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=l=>s.value=l),type:"number"},null,8,["modelValue"])]),_:1}),a(e(v),null,{default:o(()=>[a(e(_),{position:"floating"},{default:o(()=>[r("Password")]),_:1}),a(e(g),{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=l=>c.value=l),type:"password"},null,8,["modelValue"])]),_:1}),a(e(v),null,{default:o(()=>[a(e(_),{position:"floating"},{default:o(()=>[r("PIN")]),_:1}),a(e(g),{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=l=>u.value=l),type:"password"},null,8,["modelValue"])]),_:1})]),_:1}),S(m("div",null,[(f(!0),w(E,null,D(n.value,l=>(f(),w("p",G,A(l),1))),256))],512),[[U,n.value.length>0]]),a(e(H),{expand:"block",onClick:V},{default:o(()=>[r("Create")]),_:1})])]),_:1})]),_:1}))}},W=b(J,[["__scopeId","data-v-bb3d8374"]]);export{W as default};
