import{_ as w,i as x,u as b,o as y,r as c,a as f,c as L,w as t,e,f as a,g as B,h as C,b as d,j as z,k as h,l as N,m as v,n as _,p as m,q as P,v as S,s as I,t as O,F as T,x as U,y as j,I as D,z as F}from"./index-a1964d73.js";import{S as q}from"./index-3d24611d.js";const A={class:"container"},E={class:"error"},H={__name:"Login",setup(M){const V=x("axios"),g=b(),p=new q;p.create(),y(()=>{p.get("token").then(s=>{s&&g.push("/dashboard")})});const u=c(""),r=c(""),i=c(""),l=c([]),k=()=>{l.value=[];let s=!0;(u.value==""||u.value.length!=9||u.value.charAt(0)!=9)&&(l.value.push("O campo telemovel está vazio ou não tem 9 digitos ou não começa por 9"),s=!1),r.value==""&&(l.value.push("O campo password está vazio"),s=!1),(i.value==""||i.value.length!=3)&&(l.value.push("O campo pin está vazio ou não tem 4 digitos"),s=!1),s&&V.post("http://localhost/taes_backend/public/api/auth/login",{username:u.value,password:r.value,confirmation_code:i.value}).then(o=>{console.log(o.data),o.data.access_token&&(p.set("token",o.data.access_token),g.push("/dashboard"))},o=>{console.log(o),(o.response.status==401||o.response.status==400)&&l.value.push("Credenciais inválidas")})};return(s,o)=>(f(),L(e(D),null,{default:t(()=>[a(e(z),null,{default:t(()=>[a(e(B),null,{default:t(()=>[a(e(C),null,{default:t(()=>[d("Login")]),_:1})]),_:1})]),_:1}),a(e(j),{fullscreen:!0,class:"ion-padding"},{default:t(()=>[h("div",A,[a(e(N),{class:"list-container"},{default:t(()=>[a(e(v),null,{default:t(()=>[a(e(_),{position:"floating"},{default:t(()=>[d("Phone")]),_:1}),a(e(m),{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=n=>u.value=n),type:"number"},null,8,["modelValue"])]),_:1}),a(e(v),null,{default:t(()=>[a(e(_),{position:"floating"},{default:t(()=>[d("Password")]),_:1}),a(e(m),{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=n=>r.value=n),type:"password"},null,8,["modelValue"])]),_:1}),a(e(v),null,{default:t(()=>[a(e(_),{position:"floating"},{default:t(()=>[d("PIN")]),_:1}),a(e(m),{modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=n=>i.value=n),type:"password"},null,8,["modelValue"])]),_:1})]),_:1}),P(h("div",null,[(f(!0),I(T,null,O(l.value,n=>(f(),I("p",E,F(n),1))),256))],512),[[S,l.value.length>0]]),a(e(U),{expand:"block",onClick:k},{default:t(()=>[d("Create")]),_:1})])]),_:1})]),_:1}))}},J=w(H,[["__scopeId","data-v-9ae404c4"]]);export{J as default};
