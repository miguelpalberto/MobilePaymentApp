System.register(["./index-legacy-4ec23ca4.js","./simple-mask-money.esm-legacy-fbde4038.js"],(function(a,e){"use strict";var l,n,t,u,i,c,s,r,d,o,p,g,f,v,y,_,b,x,m,k,h,B,j,z,w,C,F,P,V,S,$,D,I,T,q,A,E,N,G,H,M;return{setters:[a=>{l=a._,n=a.i,t=a.r,u=a.j,i=a.a8,c=a.k,s=a.a9,r=a.o,d=a.c,o=a.w,p=a.u,g=a.aa,f=a.ab,v=a.a,y=a.D,_=a.E,b=a.a1,x=a.G,m=a.b,k=a.H,h=a.h,B=a.O,j=a.q,z=a.s,w=a.n,C=a.g,F=a.x,P=a.M,V=a.N,S=a.v,$=a.t,D=a.ac,I=a.R,T=a.X,q=a.I,A=a.P,E=a.y,N=a.z},a=>{G=a.r,H=a.i,M=a.l}],execute:function(){var e=document.createElement("style");e.textContent=".container[data-v-f65022f7]{display:flex;justify-content:center;align-items:center}span[data-v-f65022f7]{font-size:12px}.transfer-card[data-v-f65022f7]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:5px;margin:0 10px;border:1px solid #000;border-radius:10px}\n",document.head.appendChild(e);const O=a=>(E("data-v-f65022f7"),a=a(),N(),a),R=O((()=>S("br",null,null,-1))),U=O((()=>S("p",null,"Balances have been updated!",-1))),X=O((()=>S("b",null,"Total Balance:",-1))),J={class:"transfer-card"},K=O((()=>S("h4",{class:"ion-text-center"},"Available Balance",-1))),L={class:"transfer-card-value"},Q={class:"flow-transfer-container"},W={class:"transfer-card"},Y=O((()=>S("h4",{class:"ion-text-center"},"Piggy Bank Balance",-1))),Z={class:"transfer-card-value"};a("default",l({__name:"PiggyBank",props:{phone:{type:String,required:!0}},setup(a){const e=n("axios"),l=a,E=t(!0),N=t({}),O=t(null),aa=t(!1),ea=t({balance:null,piggy_bank_balance:null}),la=u((()=>N.value.piggy_bank_balance)),na=new Intl.NumberFormat("pt",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),ta=u((()=>ua.value||ua.value>0)),ua=u((()=>M(O.value))),ia=u((()=>(ea.value.balance-ea.value.piggy_bank_balance).toFixed(2))),ca=u((()=>E.value?g:f)),sa=u((()=>`${na.format(ea.value.balance)} €`)),ra=u((()=>`${na.format(ia.value)} €`)),da=u((()=>`${na.format(ea.value.piggy_bank_balance)} €`));i(ua,(a=>{a&&(E.value?a>ia.value?N.value={piggy_bank_balance:["Cannot store more money than the Total Balance in the Piggy Bank Vault"]}:N.value={}:a>ea.value.piggy_bank_balance?N.value={piggy_bank_balance:["The amount being withdrawn is greater than the current Piggy Bank Vault balance"]}:N.value={})})),c((()=>{G("#inputValue",{suffix:"€",fixed:!0,fractionDigits:2,decimalSeparator:",",thousandsSeparator:"."}),e.get(`/vcard/${l.phone}`).then((a=>{const{balance:e,piggy_bank_balance:l}=a.data.data;ea.value.balance=e,ea.value.piggy_bank_balance=l}))})),s((()=>{H("#inputValue")}));const oa=async()=>{let a;a=E.value?parseFloat(ea.value.piggy_bank_balance)+ua.value:parseFloat(ea.value.piggy_bank_balance)-ua.value,a=a.toFixed(2),await(async a=>{N.value={};try{const n=await e.patch(`/vcards/${l.phone}/updatePiggyBankBalance`,{piggy_bank_balance:a});ea.value.balance=n.data.data.balance,ea.value.piggy_bank_balance=n.data.data.piggy_bank_balance,O.value=null,aa.value=!0}catch(n){422===n.response.status&&(N.value=n.response.data.errors)}})(a)},pa=()=>{E.value=!E.value,O.value=null},ga=()=>{aa.value=!1};return(a,e)=>(r(),d(p(A),null,{default:o((()=>[v(p(k),null,{default:o((()=>[v(p(y),null,{default:o((()=>[v(p(_),{slot:"start"},{default:o((()=>[v(p(b))])),_:1}),v(p(x),null,{default:o((()=>[m("Piggy Bank Vault")])),_:1})])),_:1})])),_:1}),v(p(B),{fullscreen:!0},{default:o((()=>[R,aa.value?(r(),d(p(h),{key:0,"is-open":aa.value},{default:o((()=>[v(p(B),{class:"ion-text-center"},{default:o((()=>[v(p(j),null,{default:o((()=>[v(p(z),null,{default:o((()=>[v(p(w),null,{default:o((()=>[m("Success")])),_:1}),U])),_:1})])),_:1}),v(p(C),{expand:"full",color:"success",onClick:ga},{default:o((()=>[m("Close")])),_:1})])),_:1})])),_:1},8,["is-open"])):F("",!0),v(p(P),null,{default:o((()=>[v(p(V),{size:"12",style:{display:"flex","justify-content":"center","align-items":"center",gap:"5px"}},{default:o((()=>[X,S("b",null,$(sa.value),1)])),_:1}),v(p(V),{size:"12",style:{display:"flex","justify-content":"center","align-items":"center",gap:"5px"}},{default:o((()=>[S("div",J,[K,S("h5",L,$(ra.value),1)]),S("div",Q,[v(p(C),{fill:"clear",style:{"border-radius":"15px",padding:"0","background-color":"rgb(37, 203, 224)"},onClick:pa},{default:o((()=>[v(p(D),{style:{"font-size":"30px"},color:"light",icon:ca.value},null,8,["icon"])])),_:1})]),S("div",W,[Y,S("h5",Z,$(da.value),1)])])),_:1}),v(p(V),{size:"12",style:{display:"flex","justify-content":"center"}},{default:o((()=>[I(S("input",{id:"inputValue",type:"text",style:{"text-align":"center","font-size":"30px"},placeholder:"0,00€","onUpdate:modelValue":e[0]||(e[0]=a=>O.value=a)},null,512),[[T,O.value]])])),_:1})])),_:1}),v(p(P),null,{default:o((()=>[v(p(V),{size:"12",style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center",gap:"10px"}},{default:o((()=>[ta.value?(r(),d(p(C),{key:0,disabled:la.value,onClick:oa},{default:o((()=>[m("Apply")])),_:1},8,["disabled"])):F("",!0),N.value&&N.value.piggy_bank_balance?(r(),d(p(q),{key:1,style:{color:"red","font-size":"14px"}},{default:o((()=>[m($(N.value.piggy_bank_balance[0]),1)])),_:1})):F("",!0)])),_:1})])),_:1})])),_:1})])),_:1}))}},[["__scopeId","data-v-f65022f7"]]))}}}));
