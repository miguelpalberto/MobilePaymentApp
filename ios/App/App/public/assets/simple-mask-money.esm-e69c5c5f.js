const Q={allowNegative:!1,negativeSignAfter:!1,decimalSeparator:",",fixed:!0,fractionDigits:2,prefix:"",suffix:"",thousandsSeparator:".",cursor:"end",allowEmpty:!1};function _(u){return Object.assign(Object.assign({},Q),u)}const U="0123456789".split("");function V(u,m){const j=_(m),{beforeFormat:y,afterFormat:S,allowNegative:O,negativeSignAfter:x,fractionDigits:d,decimalSeparator:l,thousandsSeparator:M,fixed:C,prefix:A,suffix:I,cursor:B,allowEmpty:H}=j;if(typeof document>"u")return()=>{};const r=typeof u=="string"?document.querySelector(u):u!=null?u:null;if(r===null)return()=>{};if(!(r instanceof HTMLInputElement))throw new Error("the element must be an input");const L=C?"0":"_";r.hasAttribute("inputmode")||r.setAttribute("inputmode","numeric");const D=(e,o)=>{r.value=e,r.dispatchEvent(new InputEvent("input")),k(o),w=e,S==null||S(e)},f=A.length,G=[...U,"Backspace",O?"-":""],J=3+l.length+d,b=e=>{var o;return(o=e==null?void 0:e.length)!==null&&o!==void 0?o:r.value.length-I.length},K=e=>e<f,q=e=>I.length>0&&e>b(),R=(e,o=!1,s)=>{let a;const n=[...e];let t=new Array;if(s){[a]=s;const[,i]=s,[$,p]=i,g=n.splice(...i);if(a==="remove"&&g.length===1){const[v]=g;v!==l&&v!==M||n.splice($-1,p)}}let c=J,E=!1,h=0,N=!1;for(let i;i=n.pop();)if(i!=="-")if(i===l&&E&&o){const $=t.indexOf(l);t.splice($,l.length);const p=t.slice(0,d);p.length<t.length&&(c+=t.length-p.length),t=[l,...p],E=!0}else Number.isNaN(Number(i))||(c-=1,i===L?h+=1:i!==l&&h>0&&(h=0),c===0&&(t.unshift(M),c=3),t.unshift(i),t.length!==d||E||(t.unshift(l),E=!0));else N=!0;return h!==0&&t.splice(0,h),t.every(i=>i===L)&&a==="remove"&&(N=!1),t.length<=d?t=[L,l,t.join("").padStart(d,L)]:t.length===d+l.length&&t.unshift(L),N&&t[x?"push":"unshift"]("-"),(i=>"".concat(A).concat(i).concat(I))(t.join(""))},k=e=>{const o=b();let s=[o,o];return B==="move"&&e&&(s=typeof e[1]=="number"?[e[0],e[1]]:[e[0],e[0]]),r.setSelectionRange(...s),s};y==null||y(r.value);const F=R(r.value.split(""),!0);let w=F;const T=e=>{var o,s;y==null||y(r.value);const a=b();let n=(o=r.selectionStart)!==null&&o!==void 0?o:a,t=(s=r.selectionEnd)!==null&&s!==void 0?s:a;if(e.ctrlKey&&e.key==="a")return k([f,a]);if(e.ctrlKey&&e.key==="z")return D(F);if(B==="move"&&(e.key==="ArrowLeft"&&n>f||e.key==="ArrowRight"&&n<a))return;if(e.preventDefault(),e.ctrlKey&&e.key==="a")return k([f,a]);if(!G.includes(e.key))return;const c=e.key==="Backspace";if(K(n)&&([n,t]=k([f])),q(n)&&([n,t]=k([a])),c&&n===0)return;if(H&&c&&r.value.length<=A.length+1)return void D(A);const E=r.value.split(""),h=Math.abs(t-n),N=h>0,i=N?[n,h]:[n-1,1],$=[n,N?h:0,e.key],p=c?"remove":"add",g=R(E,!1,[p,{add:$,remove:i}[p]]);if(!c&&w.length<g.length&&n<b(g))n+=g.length-w.length,t+=g.length-w.length;else if(c&&w.length>g.length&&n>f){const v=w.length-g.length;n=n-v<=f?f:n-v,t=t-v<=f?f:t-v}D(g,[n,t])},z=()=>{if(document.activeElement!==r)return;const e=r.selectionStart,o=r.selectionEnd;if(typeof e!="number"||typeof o!="number")return;let s;const a=K(e),n=q(o),t=q(e),c=K(o);(a||n||c||t)&&(s=[a?f:n?b():e,c?f:n?b():o]),s&&k(s)};r.addEventListener("keydown",T),document.addEventListener("selectionchange",z),D(H&&F==="".concat(A,"0")?"":F);const P=()=>{r.removeEventListener("keydown",T),document.removeEventListener("selectionchange",z),delete r.removeMask};return Object.defineProperty(r,"removeMask",{value:P,configurable:!0,enumerable:!0,writable:!0}),P}function W(u){if(typeof document>"u")return()=>{};const m=typeof u=="string"?document.querySelector(u):u!=null?u:null;if(m===null)return()=>{};if(!(m instanceof HTMLInputElement))throw new Error("the element must be an input");return()=>{if("removeMask"in m&&typeof m.removeMask=="function")return m.removeMask()}}function X(u,m){const{decimalSeparator:j,allowNegative:y}=_(m),S=l=>l.toString().replace(".",j),O=(typeof u=="number"?S(u):(l=>{const M=Number(l);return Number.isNaN(M)?l:S(M)})(u)).split("");let x="";const d=y&&O.includes("-");for(let l;l=O.shift();)Number.isNaN(Number(l))||(x+=l),l===j&&(x+=".");return parseFloat("".concat(d?"-":"").concat(x))}export{W as i,X as l,V as r};
